---
title: "【DAY79】Unityで2Dローグライトを作る"
emoji: "🎮"
type: "tech"
topics: ["Unity", "2Dゲーム開発", "ローグライト", "Procedural Generation", "ゲームデザイン"]
published: true
published_at: "2025-08-28 05:42"
---

## Unityで2Dローグライトを作る：技術的アプローチと設計の工夫

Unityを使って2Dローグライトゲームを制作する際、ただの2Dゲームとは違い、設計や実装において特有の工夫が求められます。今回は、その中でも「プロシージャル生成（Procedural Generation）」と「プレイヤー進行管理（Progression）」を中心に、技術的な観点から整理していきます。

---

## 1. ローグライトとローグライクの違い

まず、ローグライト（Roguelite）とは、いわゆるローグライク（Roguelike）の派生で、**毎回ランダムな構成**＋**周回プレイを前提とした進行**＋**ある程度の恒久的成長要素**を備えたジャンルです。典型的な例としては『Dead Cells』や『Hades』が挙げられます。

---

## 2. プロシージャルマップ生成

2Dローグライトの核となるのが**マップの自動生成**。Unityでは以下のアプローチが考えられます：

- **タイルベースの生成（Tilemap + RuleTile）**
- **部屋のランダム接続（Room Templates + Graph）**
- **Perlin Noiseやセルオートマトンを使った地形生成**

例：部屋テンプレートを複数用意し、ノードグラフとして接続することで、**毎回違うダンジョン構造**を自動で構築可能です。これはScriptableObjectやJSONを活用することで、データ駆動型にして管理を効率化できます。

---

## 3. 敵やアイテムのランダム生成

マップだけでなく、**敵やアイテムの出現もランダム性**が重要です。以下の工夫が有効です：

- 出現テーブル（DropTable）に確率を設定
- ウェーブ毎にレベルスケーリング（HP/攻撃力）を調整
- 特定のルールに基づくレアアイテム配置（例：5部屋に1つ宝箱）

このような**シード値を使った一貫性のある乱数管理**を行えば、同じ乱数で同じ構成を再現することも可能になります。

---

## 4. プレイヤーの恒久成長システム

ローグライトでは、1周ごとに「成長を持ち帰る」要素が不可欠です。Unityでは以下の実装パターンがあります：

- ScriptableObjectでスキルツリーを管理
- PlayerPrefsやセーブデータに通貨/スキル状態を保存
- ステータスブーストをPrefabとして管理し、ゲーム中に有効化

例えば、プレイヤーが死んだ後も一定の通貨を持ち帰り、それを使って「初期HPを+20」といったアップグレードを行う設計が典型的です。

---

## 5. バランスとデバッグ

自動生成＋ランダム要素が多いジャンルゆえ、**プレイ体験のバランス調整**が最大の課題です。以下のポイントが重要：

- ランダム要素に偏りが出ないよう、分布を可視化
- デバッグモードで敵やマップの強制生成を可能にする
- プレイログを保存し、リプレイ分析可能にする

Unityの**Gizmos**や**Editor拡張**を活用すれば、シーン上でのマップ構造確認や敵配置のビジュアルデバッグも可能です。

---

## おわりに

2Dローグライトは、設計段階から「再現性」と「ランダム性」のバランスをいかに取るかがカギになります。Unityはエディタ機能や豊富なアセットによって、こうしたランダム生成系の実装に非常に向いています。今後は、アセットバンドルやオンラインランキング機能などを組み合わせて、より奥行きのあるローグライトを目指していきたい。